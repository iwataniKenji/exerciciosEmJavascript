<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Exercícios de Eventos</title>
    <link
      rel="stylesheet"
      crossorigin="anonymous"
      href="https://gc.kis.v2.scr.kaspersky-labs.com/E3E8934C-235A-4B0E-825A-35A08381A191/abn/main.css?attr=aHR0cHM6Ly9tb29kbGUudXRmcHIuZWR1LmJyL3BsdWdpbmZpbGUucGhwLzMwMTM1MDkvbW9kX3Jlc291cmNlL2NvbnRlbnQvMC8wMC1yZXZpc2FvLWphdmFzY3JpcHQtZXZlbnRvcy1leGVyY2ljaW9zLmh0bWw"
    />
    </style>
    <link
      rel="stylesheet"
      crossorigin="anonymous"
      href="https://gc.kis.v2.scr.kaspersky-labs.com/E3E8934C-235A-4B0E-825A-35A08381A191/abn/main.css?attr=aHR0cHM6Ly9tb29kbGUudXRmcHIuZWR1LmJyL3BsdWdpbmZpbGUucGhwLzMwMTM1MDkvbW9kX3Jlc291cmNlL2NvbnRlbnQvMC8wMC1yZXZpc2FvLWphdmFzY3JpcHQtZXZlbnRvcy1leGVyY2ljaW9zLmh0bWw"
    />
    <script
      type="text/javascript"
      src="chrome-extension://pbichgopagjidnkeaablhiediibgbmec/3rdparty/sizzle.min.js"
    ></script>
    <script
      type="text/javascript"
      src="chrome-extension://pbichgopagjidnkeaablhiediibgbmec/injection/injection.js"
    ></script>
  </head>
  <body class="vsc-initialized">
    <div id="esg_atica"></div>
    <h1>Exercício de Fetch/Promise/Async</h1>
    <ul>
      <li>Fazer uma requisição para a dummyjson API na parte de produtos</li>
      <li>Apresentar o nome e imagem dos produtos em uma lista</li>
      <li>Utilizar destructuring parameters</li>
      <li>Utilizar diretivas de promises, map.</li>
      <li>Paginação da dummyjson API na parte de produtos</li>
      <!--<li>Implementar os exercícios, utilizando apenas uma vez as diretivas de async/await e sem inserir uma promise dentro da outra.</li>-->
    </ul>
    <ul class="product-list"></ul>

    <!-- <script type="text/javascript" charset="utf-8">
      // com promise
      const list = document.querySelector(".product-list");
      
      fetch('https://dummyjson.com/products/')
      .then(res => res.json())
      .then(json => {
        const products = json.products.map(product => {
          return {
            title: product.title,
            image: product.images[0],
          }
        })

        products.forEach(product => {
          const { title, image } = product;

          const item = `
            <li>
              <span>${title}</span>
              <img src="${image}" alt="${title}" />
            </li>
          `

          list.insertAdjacentHTML("beforeend", item);
        })
      })
    </script> -->

    <script type="text/javascript" charset="utf-8">
      // com asyn await
      const list = document.querySelector(".product-list");
      
      async function getElements() {
        const response = await fetch('https://dummyjson.com/products/');
        const json = await response.json();

        const products = json.products.map(product => {
          return {
            title: product.title,
            image: product.images[0],
          }
        })

        products.forEach(product => {
          const { title, image } = product;

          const item = `
            <li>
              <span>${title}</span>
              <img src="${image}" alt="${title}" />
            </li>
          `

          list.insertAdjacentHTML("beforeend", item);
        })
      }

      getElements();

    </script>
  </body>
</html>
